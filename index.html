<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Joshua Rengifo | Consultoría y Desarrollo de Alto Impacto</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/@studio-freight/lenis@1.0.33/dist/lenis.min.js"></script>
    <script type="module" src="https://unpkg.com/@splinetool/viewer@1.0.28/build/spline-viewer.js"></script>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --azul-oscuro: #030712;
            --naranja: #f97316;
            --glass: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.08);
        }

        #preloader {
            position: fixed;
            inset: 0;
            background: var(--azul-oscuro);
            z-index: 99999;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--azul-oscuro);
            color: #f8fafc;
            overflow-x: hidden;
            @media (min-width: 768px) { cursor: none; }
        }

        #code-canvas {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; pointer-events: none; 
            opacity: 0.35;
        }

        #spline-bg {
            position: fixed;
            inset: 0;
            z-index: -2;
            pointer-events: none;
            opacity: 0;
            transition: opacity 2s ease;
        }

        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .perspective-container { perspective: 2000px; }
        .object-3d-scroll { transform-style: preserve-3d; will-change: transform; }

        #cursor-dot { width: 6px; height: 6px; background: var(--naranja); border-radius: 50%; position: fixed; pointer-events: none; z-index: 100001; display: none; }
        #cursor-follower { width: 45px; height: 45px; border: 1px solid rgba(249, 115, 22, 0.4); border-radius: 50%; position: fixed; pointer-events: none; z-index: 100000; display: none; }
        @media (min-width: 768px) { #cursor-dot, #cursor-follower { display: block; } }

        .gradient-text {
            background: linear-gradient(90deg, #fff, var(--naranja), #fff);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shine 8s linear infinite;
        }
        @keyframes shine { to { background-position: 200% center; } }

        .marquee { background: var(--naranja); font-weight: 900; text-transform: uppercase; letter-spacing: 0.1em; white-space: nowrap; }
        .horizontal-container { display: flex; width: 300%; will-change: transform; }
        ::-webkit-scrollbar { display: none; }
        #navbar { transition: transform 0.5s cubic-bezier(0.16, 1, 0.3, 1); }

        .img-shader-container { overflow: hidden; position: relative; }
        .img-shader-container img { transition: transform 1.5s cubic-bezier(0.19, 1, 0.22, 1); }
        .img-shader-container:hover img { transform: scale(1.05); }
    </style>
</head>
<body class="lenis-smooth">

    <canvas id="code-canvas"></canvas>
    
    <div id="preloader">
        <div class="w-24 h-[1px] bg-white/10 relative overflow-hidden">
            <div id="preloader-bar" class="absolute inset-y-0 left-0 bg-orange-500 w-0"></div>
        </div>
        <span class="text-[10px] tracking-[0.5em] text-white/40 mt-4 uppercase">Iniciando Ecosistema de Ventas</span>
    </div>

    <div id="cursor-dot"></div>
    <div id="cursor-follower"></div>

    <div id="spline-bg">
        <spline-viewer url="https://prod.spline.design/6Wq1Q7YEBQuM1S4a/scene.splinecode"></spline-viewer>
    </div>

    <a href="https://wa.me/5493541214553?text=Hola%20Joshua,%20necesito%20automatizar%20mi%20negocio" class="whatsapp-float fixed bottom-8 right-8 bg-[#25D366] w-16 h-16 rounded-full flex items-center justify-center text-3xl z-[90] shadow-2xl transition-all hover:scale-110 active:scale-95">
        <i class="fab fa-whatsapp text-white"></i>
    </a>

    <nav class="fixed w-full z-[100] border-b border-white/5" id="navbar">
        <div class="absolute inset-0 bg-[#030712]/80 backdrop-blur-xl"></div>
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between relative z-10">
            <div class="font-black text-xl tracking-tighter text-white">
                JOSHUA <span class="text-orange-500">RENGIFO</span>
            </div>
            <div class="hidden md:flex gap-10 text-[10px] font-bold uppercase tracking-[0.2em] text-white/50">
                <a href="#soluciones" class="hover:text-orange-500 transition-colors">Estrategia</a>
                <a href="#sobre-mi" class="hover:text-orange-500 transition-colors">Perfil</a>
                <a href="#contacto" class="hover:text-orange-500 transition-colors">Contacto</a>
            </div>
            <a href="#contacto" class="magnetic bg-orange-500 text-white px-6 py-2.5 rounded-full font-black text-[10px] tracking-widest shadow-lg shadow-orange-500/20">
                DIAGNÓSTICO GRATIS
            </a>
        </div>
    </nav>

    <header class="relative min-h-screen pt-40 pb-32 flex items-center justify-center overflow-hidden perspective-container">
        <div class="absolute inset-0 z-0">
            <video 
                autoplay 
                muted 
                loop 
                playsinline 
                id="header-bg-video"
                class="w-full h-[120%] object-cover opacity-70 scale-110 origin-top">
                <source src="https://i.imgur.com/myxJfxT.mp4" type="video/mp4">
            </video>
            
            <div class="absolute inset-0 bg-gradient-to-b from-[#030712]/50 via-transparent to-[#030712]"></div>
            <div class="absolute inset-0 bg-[#030712]/10"></div> 
        </div>

        <div class="max-w-7xl mx-auto px-6 relative z-10 text-center">
            <div class="flex flex-col items-center">
                <div class="reveal">
                    <div class="inline-flex items-center gap-3 px-4 py-2 rounded-full glass-card text-orange-400 text-[10px] font-bold mb-8 tracking-[0.3em] uppercase mx-auto">
                        <span class="flex h-1.5 w-1.5 rounded-full bg-orange-500 animate-ping"></span>
                        Sistemas de Alta Rentabilidad Digital
                    </div>
                    
                    <h1 class="text-6xl md:text-[8rem] font-black mb-8 leading-[0.8] tracking-tighter text-white">
                        Menos fricción,<br>
                        <span class="gradient-text">Más ingresos</span>
                    </h1>
                    
                    <p class="text-xl md:text-2xl text-slate-200 mb-10 max-w-3xl mx-auto leading-relaxed font-light drop-shadow-lg">
                        No construyo solo webs; diseño <strong>activos digitales</strong> que automatizan tus ventas y optimizan tus márgenes de ganancia.
                    </p>
                    
                    <div class="flex flex-col sm:flex-row gap-6 justify-center">
                        <a href="#contacto" class="magnetic inline-block bg-orange-500 text-white px-12 py-6 rounded-2xl text-lg font-black hover:bg-white hover:text-black transition-all duration-500 shadow-xl shadow-orange-500/20">
                            Diagnosticar mi negocio
                        </a>
                        <a href="#soluciones" class="magnetic inline-block glass-card text-white px-12 py-6 rounded-2xl text-lg font-black hover:bg-white/10 transition-all duration-500">
                            Ver Estrategias
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="marquee py-4" id="marquee">
        <div class="marquee-content flex gap-20">
            <span>• ESTRATEGIA DE RENTABILIDAD • CÓDIGO PREMIUM • CONVERSIÓN EXTREMA • ESCALABILIDAD •</span>
            <span>• ESTRATEGIA DE RENTABILIDAD • CÓDIGO PREMIUM • CONVERSIÓN EXTREMA • ESCALABILIDAD •</span>
        </div>
    </div>

    <section class="py-40 perspective-container" id="problemas">
        <div class="max-w-5xl mx-auto px-6">
            <div class="text-center mb-24 reveal">
                <h2 class="text-5xl md:text-7xl font-black text-white mb-8 leading-tight">Tu proceso actual <br><span class="text-orange-500">te está limitando</span>.</h2>
                <div class="w-20 h-[2px] bg-orange-500/30 mx-auto"></div>
            </div>
            <div class="grid md:grid-cols-2 gap-16">
                <div class="p-12 rounded-[3rem] glass-card reveal group object-3d-scroll">
                    <div class="w-16 h-16 rounded-2xl bg-orange-500/10 flex items-center justify-center mb-8"><i class="fas fa-hand-holding-usd text-2xl text-orange-500"></i></div>
                    <h3 class="text-3xl font-bold mb-4 text-white">Fugas de Dinero</h3>
                    <p class="text-slate-400 text-lg">Pedidos perdidos o consultas ignoradas en el chat son ventas que se lleva tu competencia. Yo elimino ese error.</p>
                </div>
                <div class="p-12 rounded-[3rem] glass-card reveal group object-3d-scroll">
                    <div class="w-16 h-16 rounded-2xl bg-blue-500/10 flex items-center justify-center mb-8"><i class="fas fa-robot text-2xl text-blue-500"></i></div>
                    <h3 class="text-3xl font-bold mb-4 text-white">Esclavitud Operativa</h3>
                    <p class="text-slate-400 text-lg">Si pasás horas respondiendo precios o enviando catálogos, estás gastando tiempo de CEO en tareas de $1 USD.</p>
                </div>
            </div>
        </div>
    </section>

    <div id="soluciones-pin">
        <section class="bg-black overflow-hidden" id="soluciones">
            <div class="horizontal-container">
                <div class="horizontal-item bg-[#030712] w-screen h-screen flex items-center justify-center">
                    <div class="text-center">
                        <span class="text-orange-500 font-black tracking-[0.5em] uppercase text-xs">Paso 01</span>
                        <h2 class="text-7xl md:text-[10rem] font-black text-white mt-8 tracking-tighter">CAPTACIÓN</h2>
                    </div>
                </div>
                <div class="horizontal-item bg-black w-screen h-screen flex items-center justify-center">
                    <div class="text-center">
                        <span class="text-blue-500 font-black tracking-[0.5em] uppercase text-xs">Paso 02</span>
                        <h2 class="text-7xl md:text-[10rem] font-black text-white mt-8 tracking-tighter">ORDEN</h2>
                    </div>
                </div>
                <div class="horizontal-item bg-[#030712] w-screen h-screen flex items-center justify-center">
                    <div class="text-center">
                        <span class="text-orange-500 font-black tracking-[0.5em] uppercase text-xs">Paso 03</span>
                        <h2 class="text-7xl md:text-[10rem] font-black text-white mt-8 tracking-tighter">ESCALA</h2>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <section class="py-40 perspective-container" id="sobre-mi">
        <div class="max-w-7xl mx-auto px-6 flex flex-col md:flex-row items-center gap-24">
            <div class="w-full md:w-1/2 reveal">
                <div class="p-4 glass-card rounded-[4rem] img-shader-container object-3d-scroll">
                    <img src="https://eiufb.github.io/SoyJoshua/7771020e-b478-4cf5-93fa-0e9bdacba366.jfif" class="rounded-[3.2rem] grayscale">
                </div>
            </div>
            <div class="w-full md:w-1/2 reveal">
                <span class="text-orange-500 font-bold uppercase tracking-[0.4em] text-[10px]">Consultor en Eficiencia Digital</span>
                <h2 class="text-5xl md:text-7xl font-black text-white mt-6 mb-10 leading-[1.1]">No código, <br>resultados.</h2>
                <p class="text-xl text-slate-400 mb-10 font-light">Soy Joshua Rengifo. Mi enfoque no es técnico, es comercial. Utilizo la ingeniería web para crear sistemas que <strong>capturan, gestionan y cierran clientes</strong> de forma autónoma.</p>
                <div class="grid grid-cols-2 gap-4">
                    <div class="p-6 glass-card rounded-2xl border-l-4 border-orange-500 font-bold tracking-widest uppercase text-[10px]">ROI Garantizado</div>
                    <div class="p-6 glass-card rounded-2xl border-l-4 border-blue-500 font-bold tracking-widest uppercase text-[10px]">Sistemas Propios</div>
                </div>
            </div>
        </div>
    </section>

    <form id="whatsappForm" class="max-w-md mx-auto space-y-4 md:space-y-6">
    <input id="nombre" type="text" required placeholder="Tu Nombre / Empresa" 
        class="w-full bg-white/5 border border-white/10 px-6 py-4 md:px-8 md:py-6 rounded-2xl text-white outline-none focus:border-orange-500 text-base md:text-lg">
    
    <select id="servicio" 
        class="w-full bg-white/5 border border-white/10 px-6 py-4 md:px-8 md:py-6 rounded-2xl text-white/50 outline-none text-base md:text-lg appearance-none">
        <option value="" disabled selected>¿Qué solución buscas?</option>
        <option value="Landing Page" class="bg-slate-900">Landing de Alta Conversión</option>
        <option value="Web App" class="bg-slate-900">Automatización (Cerebro Java)</option>
        <option value="Ecosistema" class="bg-slate-900">Ecosistema de Ventas Full</option>
    </select>

    <select id="presupuesto" required
        class="w-full bg-white/5 border border-white/10 px-6 py-4 md:px-8 md:py-6 rounded-2xl text-white/50 outline-none text-base md:text-lg appearance-none">
        <option value="" disabled selected>Presupuesto del proyecto</option>
        <option value="Bajo" class="bg-slate-900">Menos de $1,000 USD</option>
        <option value="Medio" class="bg-slate-900">$1,000 - $3,000 USD</option>
        <option value="Alto" class="bg-slate-900">Más de $3,000 USD</option>
    </select>

    <select id="urgencia" required
        class="w-full bg-white/5 border border-white/10 px-6 py-4 md:px-8 md:py-6 rounded-2xl text-white/50 outline-none text-base md:text-lg appearance-none">
        <option value="" disabled selected>¿Para cuándo lo necesitas?</option>
        <option value="Inmediato" class="bg-slate-900">Lo necesito YA (Urgente)</option>
        <option value="Pronto" class="bg-slate-900">Próximas 2-4 semanas</option>
        <option value="Explorando" class="bg-slate-900">Solo estoy cotizando</option>
    </select>

    <button type="submit" 
        class="magnetic w-full bg-orange-500 text-white py-5 md:py-7 rounded-2xl text-lg md:text-xl font-black transition-transform active:scale-95 shadow-xl shadow-orange-500/20">
        SOLICITAR ANÁLISIS IA <i class="fab fa-whatsapp ml-2"></i>
    </button>
</form>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        // --- LÓGICA DE CARGA Y AUTOPLAY ---
        window.addEventListener('load', () => {
            const video = document.getElementById('header-bg-video');
            
            gsap.to("#preloader-bar", { width: "100%", duration: 0.8 });
            gsap.to("#preloader", { yPercent: -100, duration: 1.2, delay: 1, ease: "expo.inOut", onComplete: () => {
                document.getElementById('preloader').remove();
                document.getElementById('spline-bg').style.opacity = "0.6";
                
                if (video) {
                    video.play().catch(error => console.log("Autoplay preventivo activado"));
                }
            }});
        });

        const lenis = new Lenis({ lerp: 0.05 });
        function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
        requestAnimationFrame(raf);

        // --- EFECTO PARALLAX VIDEO ---
        gsap.to("#header-bg-video", {
            yPercent: 30, 
            ease: "none",
            scrollTrigger: {
                trigger: "header",
                start: "top top",
                end: "bottom top",
                scrub: true
            }
        });

        const canvas = document.getElementById('code-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        const codeLines = ["ROI++", "PROFIT", "gsap.to()", "SCALABILITY", "3D_MODE", "AUTOMATE", "CONVERT", "010101"];

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        class CodeParticle {
            constructor() { this.init(); }
            init() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.text = codeLines[Math.floor(Math.random() * codeLines.length)];
                this.depth = Math.random(); 
                this.speedFactor = this.depth * 5; 
                this.fontSize = 8 + (this.depth * 12); 
                this.opacity = 0.1 + (this.depth * 0.3);
            }
            draw(scrollVelocity) {
                this.y -= (scrollVelocity * this.speedFactor * 0.1) + (this.depth * 0.5);
                if (this.y < -100) this.y = canvas.height + 100;
                if (this.y > canvas.height + 100) this.y = -100;

                ctx.fillStyle = `rgba(249, 115, 22, ${this.opacity})`;
                ctx.font = `${this.fontSize}px monospace`;
                ctx.fillText(this.text, this.x, this.y);
            }
        }

        for(let i=0; i<60; i++) particles.push(new CodeParticle());

        let lastScroll = 0;
        function animateCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            const currentScroll = window.pageYOffset;
            const scrollVelocity = currentScroll - lastScroll;
            lastScroll = currentScroll;
            particles.forEach(p => p.draw(scrollVelocity));
            requestAnimationFrame(animateCanvas);
        }
        animateCanvas();

        document.querySelectorAll(".object-3d-scroll").forEach(obj => {
            gsap.to(obj, {
                scrollTrigger: {
                    trigger: obj,
                    start: "top bottom",
                    end: "bottom top",
                    scrub: 1.5,
                },
                rotateY: 25,
                rotateX: -10,
                z: 100,
                ease: "none"
            });
        });

        const nav = document.getElementById('navbar');
        let lastScrollY = window.scrollY;
        window.addEventListener('scroll', () => {
            if (lastScrollY < window.scrollY && window.scrollY > 150) {
                gsap.to(nav, { yPercent: -100, duration: 0.5 });
            } else {
                gsap.to(nav, { yPercent: 0, duration: 0.5 });
            }
            lastScrollY = window.scrollY;
        });

        const dot = document.getElementById('cursor-dot');
        const follower = document.getElementById('cursor-follower');
        window.addEventListener('mousemove', (e) => {
            gsap.to(dot, { x: e.clientX - 3, y: e.clientY - 3, duration: 0.1 });
            gsap.to(follower, { x: e.clientX - 22, y: e.clientY - 22, duration: 0.6, ease: "power3.out" });
        });

        document.querySelectorAll('.magnetic').forEach(el => {
            el.addEventListener('mousemove', (e) => {
                const rect = el.getBoundingClientRect();
                gsap.to(el, { x: (e.clientX - rect.left - rect.width/2)*0.3, y: (e.clientY - rect.top - rect.height/2)*0.3, duration: 0.4 });
            });
            el.addEventListener('mouseleave', () => gsap.to(el, { x: 0, y: 0, duration: 0.6 }));
        });

        let sections = gsap.utils.toArray(".horizontal-item");
        gsap.to(sections, {
            xPercent: -100 * (sections.length - 1),
            ease: "none",
            scrollTrigger: {
                trigger: "#soluciones",
                pin: true,
                scrub: 1,
                end: () => "+=" + window.innerWidth * 2
            }
        });

        document.querySelectorAll('.reveal').forEach((el) => {
            gsap.fromTo(el, { opacity: 0, y: 60 }, { opacity: 1, y: 0, duration: 1.5, ease: "expo.out", scrollTrigger: { trigger: el, start: "top 90%" }});
        });

        gsap.to(".marquee-content", { xPercent: -50, ease: "none", duration: 20, repeat: -1 });

        // --- CONEXIÓN REAL CON RAILWAY ---
        document.getElementById('whatsappForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const btn = e.target.querySelector('button');
            const originalText = btn.innerHTML;
            const nombre = document.getElementById('nombre').value;
            const servicio = document.getElementById('servicio').value;

            // Feedback visual
            btn.innerHTML = '<i class="fas fa-circle-notch animate-spin mr-2"></i> PROCESANDO ANÁLISIS...';
            btn.disabled = true;

            try {
                // LLAMADA A TU DOMINIO REAL DE RAILWAY
                const response = await fetch('https://soyjoshua-production.up.railway.app/api/v1/diagnostico', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        usuario: nombre,
                        tipoServicio: servicio
                    })
                });

                const data = await response.json();

                // Mensaje profesional con el ID generado por Java
                const msg = `Hola Joshua! Mi nombre es ${data.usuario}. Acabo de completar el diagnóstico en tu web para ${servicio}. Mi ID de seguimiento es: ${data.id}. Prioridad del sistema: ${data.prioridad}.`;
                
                window.open(`https://wa.me/5493541214553?text=${encodeURIComponent(msg)}`, '_blank');

            } catch (error) {
                console.error("Error en el servidor Java:", error);
                // Failsafe: Si el servidor falla, enviamos el mensaje básico para no perder al cliente
                const fallbackMsg = `Hola Joshua! Soy ${nombre}. Me interesa el servicio de ${servicio} y quiero una consultoría.`;
                window.open(`https://wa.me/5493541214553?text=${encodeURIComponent(fallbackMsg)}`, '_blank');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        });
        
    </script>
</body>
</html>

